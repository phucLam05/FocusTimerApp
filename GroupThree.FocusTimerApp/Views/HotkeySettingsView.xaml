<UserControl x:Class="GroupThree.FocusTimerApp.Views.HotkeySettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:GroupThree.FocusTimerApp.Converters">
    
    <UserControl.Resources>
        <conv:BooleanToStatusConverter x:Key="BooleanToStatusConverter" />
        <conv:BooleanToColorConverter x:Key="BooleanToColorConverter" />
    </UserControl.Resources>

    <StackPanel>
        
        <TextBlock Text="Hotkey Settings" 
                   FontSize="20" 
                   FontWeight="Bold"
                   Foreground="{DynamicResource TextPrimaryBrush}"
                   Margin="0,0,0,8" />
        
        <TextBlock Text="Configure keyboard shortcuts for quick access" 
                   FontSize="11"
                   Foreground="{DynamicResource TextSecondaryBrush}"
                   Margin="0,0,0,12" />

        <Border Background="{DynamicResource CardBackgroundBrush}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="12"
                Padding="15"
                Margin="0,0,0,10">
            <ItemsControl ItemsSource="{Binding Hotkeys}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="{DynamicResource BorderBrush}"
                                BorderThickness="0,0,0,1"
                                Padding="0,8"
                                Margin="0,0,0,8">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="130" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="100" />
                                    <ColumnDefinition Width="75" />
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0"
                                           Text="{Binding ActionName}" 
                                           FontSize="13"
                                           FontWeight="SemiBold"
                                           Foreground="{DynamicResource TextPrimaryBrush}"
                                           VerticalAlignment="Center" />
                                
                                <Border Grid.Column="1"
                                        Background="{DynamicResource SecondaryButtonBrush}"
                                        BorderBrush="{DynamicResource PrimaryButtonBrush}"
                                        BorderThickness="1.5"
                                        CornerRadius="8"
                                        Padding="10,5"
                                        Margin="10,0"
                                        HorizontalAlignment="Left"
                                        MinWidth="120">
                                    <TextBlock Text="{Binding DisplayText}" 
                                               FontSize="12"
                                               FontWeight="Bold"
                                               Foreground="{DynamicResource PrimaryButtonBrush}"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center" />
                                </Border>
                                
                                <Border Grid.Column="2"
                                        Background="{Binding IsRegistered, Converter={StaticResource BooleanToColorConverter}}"
                                        CornerRadius="10"
                                        Padding="10,4"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        MinWidth="85">
                                    <TextBlock Text="{Binding IsRegistered, Converter={StaticResource BooleanToStatusConverter}}" 
                                               FontSize="9"
                                               FontWeight="Bold"
                                               Foreground="White"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center" />
                                </Border>
                                
                                <Button Grid.Column="3"
                                        Command="{Binding DataContext.EditHotkeyCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        CommandParameter="{Binding}"
                                        Style="{StaticResource ModernButton}"
                                        Width="65"
                                        Height="28"
                                        FontSize="11"
                                        FontWeight="SemiBold"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Cursor="Hand"
                                        ToolTip="Edit this hotkey combination"
                                        Padding="6,0">
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <Path Data="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"
                                              Fill="{DynamicResource TextPrimaryBrush}"
                                              Width="11" 
                                              Height="11"
                                              Stretch="Uniform"
                                              Margin="0,0,3,0"
                                              VerticalAlignment="Center" />
                                        <TextBlock Text="Edit" 
                                                   FontSize="11"
                                                   FontWeight="SemiBold"
                                                   VerticalAlignment="Center" />
                                    </StackPanel>
                                </Button>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Border>

        <Border Background="{DynamicResource SecondaryButtonBrush}"
                BorderBrush="{DynamicResource PrimaryButtonBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="12"
                Margin="0,0,0,15">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                    <Path Data="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"
                          Fill="{DynamicResource PrimaryButtonBrush}"
                          Width="16" Height="16"
                          Stretch="Uniform"
                          Margin="0,0,6,0" />
                    <TextBlock Text="Hotkey Tips" 
                               FontSize="12"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimaryBrush}" />
                </StackPanel>
                
                <TextBlock FontSize="10"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           LineHeight="16">
                    <Run Text="&#x2022; Use modifiers: Ctrl, Alt, Shift, Win" />
                    <LineBreak />
                    <Run Text="&#x2022; Example: Ctrl+Alt+S, Win+F1" />
                    <LineBreak />
                    <Run Text="&#x2022; Click 'Apply' to register changes" />
                </TextBlock>
            </StackPanel>
        </Border>

        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Reset Defaults" 
                    Command="{Binding ResetDefaultsCommand}" 
                    Style="{StaticResource ModernButton}"
                    Width="130"
                    Height="38"
                    Margin="0,0,8,0" />
            
            <Button Content="Apply Changes" 
                    Command="{Binding ApplyCommand}" 
                    Style="{StaticResource PrimaryButton}"
                    Width="130"
                    Height="38" />
        </StackPanel>
    </StackPanel>
</UserControl>